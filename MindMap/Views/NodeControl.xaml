<UserControl x:Class="MindMap.Views.NodeControl"
             xmlns:converter="clr-namespace:MindMap.Converters"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:behavior="clr-namespace:MindMap.Behavior"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewmodels="clr-namespace:MindMap.ViewModels">
    <UserControl.Resources>
        <converter:InverseBoolConverter x:Key="InverseBoolConverter" />
    </UserControl.Resources>
    <Border x:Name="NodeBorder"
        CornerRadius="8"
        Background="White"
        Padding="8"
        BorderBrush="{Binding IsSelected, Converter={StaticResource SelectionToBorderBrushConverter}}"
        BorderThickness="{Binding IsSelected, Converter={StaticResource SelectionToBorderThicknessConverter}}">
        <StackPanel>
            <Image Source="{Binding ImagePath}" MaxWidth="200" MaxHeight="200" Stretch="Uniform"
                   Margin="0,0,0,4"/>
            <Button Content="이미지 선택"
                Command="{Binding SelectImageCommand}"
                FontSize="12" Padding="4" HorizontalAlignment="Left"
                IsTabStop="False"
                Focusable="False"
                Margin="0,0,0,4"/>

            <TextBox Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     BorderThickness="0" Background="Transparent" FontSize="14"
                     AcceptsReturn="True" TextWrapping="Wrap"
                     MinWidth="100" MinHeight="30">
                <i:Interaction.Behaviors>
                    <behavior:FocusBehavior IsFocused="{Binding IsFocused}" />
                    <behavior:EscKeyToCommandBehavior
                        Command="{Binding DataContext.ExitEditModeCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
                    <!--<behavior:TextAutoWidthBehavior Vm="{Binding}"/>-->
                </i:Interaction.Behaviors>
            </TextBox>
        </StackPanel>
    </Border>
</UserControl>
